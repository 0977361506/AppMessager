<!DOCTYPE html>
<html lang="en">
<head>
  <title>Messager</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
  <link rel='stylesheet' href='assets/css/index.css' type="text/css">
  <script src='/socket.io/socket.io.js'></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script src='./assets/js/logic.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- <style>
    .main{
        background:black;
        padding-top: 8px;
        padding-left: 10px ;
        padding-right: 10px;
    }

    .fas,icon{
        color: #ffffffcc;
        font-size: 20px;
    }
    .input-search{
        border-radius: 27px;
    }
    .main-chat{
        border-top: solid 1px #212529 
        ; margin-top: 10px;min-height: 750px;
    }
    #left-content{
     border-right: solid 1px white;
    }
    .friend{
        margin-bottom: 10px;   
        padding-top: 10px; 
    }
    .fa-search{
        top: 7px;
        position: absolute;
        z-index: 1000;
        left: 41px;
    }
    .icon{
        color: rgb(0, 132, 255);
            font-size: 21px;
    }
    .message{
        margin-top: 10px;
    }
    .message-f-user{
        border-radius: 16px;
        font-size: .875rem;
        color: white;
        margin: 0px;
        border: solid 1px;
        padding: 4px;
        margin-bottom: 8px;
    }

    .message-f-you{
        border-radius: 16px;
        font-size: .875rem;
        color: white;
        margin: 0px;
        border: solid 1px rgb(0, 132, 255);;
        padding: 4px;
        margin-bottom: 8px;
        background: rgb(0, 132, 255);;
    }
  </style> -->
</head>
<body> 
    <div class="row main">
       <div class="container-fluid">
                <div class="row justify-content-between">
                    <div class="col col-sm-4" style="padding-bottom: 5px;">
                        <div class="d-flex">
                            <div class="image-container">
                                <img src="https://i.pinimg.com/564x/79/0d/29/790d29ac20dc5fc7cd5c2a61cbddb9f7.jpg" title="ảnh face book " style="max-width: 38px; max-height: 39px; border-radius: 50%;"  />
                             </div>
     
                             <div class="input-search" style="padding-left: 10px;">
                                <span class="glyphicon glyphicon-search"></span>
                                <input class="form-control input-search" type="text" placeholder="Tìm kiếm trên facebook" style="background: #3a3b3c; border: none !important;">
                             </div>  
                        </div>
                    </div>
                    <div class="col col-sm-5">
                        <div class="row">
                           <div class="col col-sm-2">
                              <i class="fas fa-home"></i>
                           </div>

                           <div class="col col-sm-2">
                                <i class="fas fa-tv"></i>
                            </div>

                            <div class="col col-sm-2">
                                <i class="fas fa-archive"></i>
                            </div>
                            
                            <div class="col col-sm-2">
                                <i class="fas fa-church"></i>
                            </div>

                            <div class="col col-sm-2">
                                <i class="fas fa-dice-d6"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col col-sm-2">
                        <div class="row">
                           <div class="col col-sm-5">
                               <img src="https://scontent.fhan14-2.fna.fbcdn.net/v/t1.6435-1/cp0/p80x80/176368141_1193350064449159_5082408654114027829_n.jpg?_nc_cat=102&ccb=1-3&_nc_sid=7206a8&_nc_ohc=Zpn2S34cOicAX9d0Sx4&_nc_ht=scontent.fhan14-2.fna&oh=eefab7227b21d7d6f7be5d31985f31dd&oe=60FD41DD"
                               style="max-width: 30px ; max-height: 30px; border-radius: 50%;" />
                               <label style="color: white;">Hiếu</label>
                           </div>
                           <div class="col col-sm-2">
                            <i class="fas fa-dice-six"></i>
                           </div>
                           <div class="col col-sm-2">
                            <i class="fas fa-bell"></i>
                            </div>
                            <div class="col col-sm-2">
                             
                                <i class="fas fa-caret-down"></i>
                            </div>  
                        </div>
                    </div>
                </div>
       </div>

       <!-- content message -->
       <div class="container-fluid  main-chat"> 

            <div class="row">
              <div class="col col-sm-3"  id="left-content">

                <div class="row friend" >
                    <div class="col col-sm-12">
                        <div class="d-flex justify-content-between">
                            <div class="image-user">
                                <h3 style="color: white;">Chat</h3>
                            </div>
                            <div style="padding-left: 10px">
                                <i style='font-size:22px' class='fas'>&#xf044;</i>
                            </div>
                        </div>
                    </div>
                    <div class="col col-sm-12">
                         <i class="fas fa-search"><span style="font-size: 15px;">  &nbsp; Tìm kiếm trên messager</span></i>
                         <input class="form-control  input-search" style="background: #3a3b3c; border: none !important;"/>
                    </div>
                 </div>

                 
                <div class=" row friend video-container">
                <video autoplay class="remote-video" id="remote-video" style="width: 165px;"></video>
                <video autoplay muted class="local-video" id="local-video" style="width: 165px;"></video>
                </div>




              </div>

              <div class="col col-sm-9" id="right-content">
                 <div class="row friend">
                     <div class="col col-sm-10">
                        <div class="d-flex">
                            <div class="image-user">
                                <img src="https://scontent.fhan14-2.fna.fbcdn.net/v/t1.6435-1/cp0/p80x80/176368141_1193350064449159_5082408654114027829_n.jpg?_nc_cat=102&ccb=1-3&_nc_sid=7206a8&_nc_ohc=Zpn2S34cOicAX9d0Sx4&_nc_ht=scontent.fhan14-2.fna&oh=eefab7227b21d7d6f7be5d31985f31dd&oe=60FD41DD"
                                style="max-width:40px ; max-height :40px; border-radius: 50%;" />
                            </div>
                            <div style="padding-left: 10px">
                                <p style="font-size: 0.875rem ; color: white; margin: 0px;">Phương Anh</p>
                                <p style="font-size: 10px; color: white ; margin: 0px;">Hoạt động 10 phút trước</p>
                            </div>
                        </div>
                     </div>
                     <div class="col col-sm-2">
                        <div class="row">
                            <div class="col col-sm-4">
                                <i class="fa fa-phone icon" aria-hidden="true"></i>
                            </div>
 
                            <div class="col col-sm-4">
                                <i class="fa fa-camera icon" aria-hidden="true"></i>
                             </div>
 
                             <div class="col col-sm-4">
                                <i  class="fa icon">&#xf071;</i>
                             </div>
                             
                        
                         </div>
                     </div>
                 </div>

                 <div class="row main-chat">
                    <div class="col col-sm-12" style="overflow-y: scroll;
                    position: relative;
                    height: 700px;">
                        <div class="d-flex justify-content-start comment-user">
                            <div class="message">
                                <div class="d-flex">
                                    <div class="image-user">
                                        <img src="https://scontent.fhan14-2.fna.fbcdn.net/v/t1.6435-1/cp0/p80x80/176368141_1193350064449159_5082408654114027829_n.jpg?_nc_cat=102&ccb=1-3&_nc_sid=7206a8&_nc_ohc=Zpn2S34cOicAX9d0Sx4&_nc_ht=scontent.fhan14-2.fna&oh=eefab7227b21d7d6f7be5d31985f31dd&oe=60FD41DD"
                                        style="max-width:40px ; max-height :40px; border-radius: 50%;" />
                                    </div>
                                    <div style="padding-left: 10px" class="list-comment-user">
                                        <p class="message-f-user" >Helo chị phương anh xinh đẹp của chú </p>
                                        <p  class="message-f-user">Cháu đang làm gi thế </p>
                                        <p   class="message-f-user">Cháu nay không đi làm à ! </p>
                                   </div>
                            </div>
                            </div>
                       </div>


                        <div class="d-flex justify-content-end comment-you">
                            <div class="message">
                                <div class="d-flex">
                                    <div class="image-user">
                                        <img src="https://scontent.fhan14-2.fna.fbcdn.net/v/t1.6435-1/cp0/p80x80/176368141_1193350064449159_5082408654114027829_n.jpg?_nc_cat=102&ccb=1-3&_nc_sid=7206a8&_nc_ohc=Zpn2S34cOicAX9d0Sx4&_nc_ht=scontent.fhan14-2.fna&oh=eefab7227b21d7d6f7be5d31985f31dd&oe=60FD41DD"
                                        style="max-width:40px ; max-height :40px; border-radius: 50%;" />
                                    </div>
                                    <div style="padding-left: 10px" class="list-comment-user">
                                        <p class="message-f-you">Chào chá</p>
                                        <p class="message-f-you">Nay chú không đi làm  Nay chú không đi làm Nay chú không đi làm Nay chú không đi làm  </p>
                                        <p class="message-f-you">Chú ở nhà</p>
                                </div>
                            </div>
                        </div>
                        </div>
                        

                 </div>
              </div>
            </div>
       </div>
    </div>

</body>

<script>
    
    // let isAlreadyCalling = false;

    // let getCalled = false;

    // const existingCalls = [];

    // const { RTCPeerConnection, RTCSessionDescription } = window;

    // const peerConnection = new RTCPeerConnection();
    
    // const socket = io.connect("localhost:3333"); 

//     async function callUser(e) {
        
//         let socketId = $(e).attr("id");
//         console.log(socketId)
//         const offer = await peerConnection.createOffer();
//         await peerConnection.setLocalDescription(new RTCSessionDescription(offer));

//         socket.emit("call-user", {
//             offer,
//             to: socketId
//         });
//     }


    

//   socket.on("call-made", async data => {
//     console.log(data)
//     if (getCalled) {
//       const confirmed = confirm(
//         `User "Socket: ${data.socket}" wants to call you. Do accept this call?`
//       );
  
//       if (!confirmed) {
//         socket.emit("reject-call", {
//           from: data.socket
//         });
  
//         return;
//       }
//     }
  
//     await peerConnection.setRemoteDescription(
//       new RTCSessionDescription(data.offer)
//     );
    
//     const answer = await peerConnection.createAnswer();
//     await peerConnection.setLocalDescription(new RTCSessionDescription(answer));
  
//     socket.emit("make-answer", {
//       answer,
//       to: data.socket
//     });
//     getCalled = true;
//   });
  
//   socket.on("answer-made", async data => {
//     await peerConnection.setRemoteDescription(
//       new RTCSessionDescription(data.answer)
//     );
  
//     if (!isAlreadyCalling) {
//       callUser(data.socket);
//       isAlreadyCalling = true;
//     }
//   });
  
  
  
  
//   socket.on("call-rejected", data => {
//     alert(`User: "Socket: ${data.socket}" rejected your call.`);

//   });
  
//   peerConnection.ontrack = function({ streams: [stream] }) {
//     const remoteVideo = document.getElementById("remote-video");
//     if (remoteVideo) {
//       remoteVideo.srcObject = stream;
//     }
//   };
  
//   navigator.getUserMedia(
//     { video: true, audio: true },
//     stream => {
//       const localVideo = document.getElementById("local-video");
//       if (localVideo) {
//         localVideo.srcObject = stream;
//       }
  
//       stream.getTracks().forEach(track => peerConnection.addTrack(track, stream));
//     },
//     error => {
//       console.warn(error.message);
//     }
//   );
  



</script>
</html>
